<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Create account PIXO</title>
    <link rel="shortcut icon" href="static/images/logo_img.svg">
    <link rel="stylesheet" href="static/css/view.css">
</head>
<body>
    <div class="background">
        <img src="static/images/decor.svg" alt="shape" style="position: absolute; max-width: 650px; min-width: 50px; right: 0%; top: 25%; z-index: 1;">
        <img src="static/images/decor.svg" alt="shape" style="position: absolute; max-width: 1000px; min-width: 100px; left: -30%; bottom: 0%; z-index: 1;">
        <div class="header">
            <a href="/"><img src="static/images/logo_white.svg" alt="logo" class="logo"></a>
            <div class="right-part">
                <a href="/catalog">Catalog</a>
                <a href="/about_us">About us</a>
                <a href="/support">Support</a>
            </div>
        </div>
        <div class="body_input">
            <h1>Create</h1>
            <input type="text" placeholder="Username" class="inp" id="username">
            <input type="password" placeholder="Password" class="inp" id="password">
            <input type="password" placeholder="Confirm the password" class="inp" id="password_conf">
            <input type="text" placeholder="Name" class="inp" id="name">
            <input type="text" placeholder="Surname" class="inp" id="surname">
            <input type="text" placeholder="Patronymic" class="inp" id="patronymic">
            <input type="text" placeholder="Phone number" class="inp" id="phone">
            <input type="email" placeholder="Email address" class="inp" id="email">
            <input type="text" placeholder="Passport number" class="inp" id="passport_number">
            <input type="text" placeholder="Card number" class="inp" id="card">
            <button type="submit" style="width: 14%; border-radius: 10px; padding: 7px 15px; width: 330px;" onclick="registerIn()">Submit</button>
            <a href="/sign">Sign in</a>
        </div>
    </div>
    <div class="footer">
        <a href="/"><img src="static/images/white_little.svg" alt="logo" style="max-width: 30px;"></a>
        <div class="footer_text">
            <a href="/catalog">Catalog</a>
            <a href="/about_us">About us</a>
            <a href="/support">Support</a>
        </div>
    </div>
      <script>
        async function registerIn() {
            const username = document.getElementById("username");
            const password = document.getElementById("password");
            const password_conf = document.getElementById("password_conf");
            const name = document.getElementById("name");
            const surname = document.getElementById("surname");
            const patronymic = document.getElementById("patronymic");
            const phone = document.getElementById("phone");
            const email = document.getElementById("email");
            const passport_number = document.getElementById("passport_number");
            const card = document.getElementById("card");

            const response = await fetch("/registration", {
            method: "POST",
            headers: {"Content-Type": "application/json"},
            body: JSON.stringify({
            username: username.value,
            password: password.value,
            password_conf: password_conf.value,
            name: name.value,
            surname: surname.value,
            patronymic: patronymic.value,
            phone: phone.value,
            email: email.value,
            passport_number: passport_number.value,
            card: card.value
        })
      });
      if (response.ok){
        const data = await response.json();
        localStorage.setItem("token", data.access_token);
        window.location.href = "/";
      } else {
        const data = await response.json();
        alert(data.message);
      }
    }
  </script>
</body>
</html>