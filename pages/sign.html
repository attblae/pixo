<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>PIXO</title>
    <link rel="shortcut icon" href="static/images/logo_img.svg">
    <link rel="stylesheet" href="static/css/view.css">
</head>
<body>
    <div class="background">
        <img src="static/images/decor.svg" alt="shape" style="position: absolute; max-width: 650px; min-width: 50px; right: 0%; top: 25%; z-index: 1;">
        <img src="static/images/decor.svg" alt="shape" style="position: absolute; max-width: 1000px; min-width: 100px; left: -30%; bottom: 0%; z-index: 1;">
        <div class="header">
            <a href="main.html"><img src="static/images/logo_white.svg" alt="logo" class="logo"></a>
            <div class="right-part">
                <a href="catalog.html">Catalog</a>
                <a href="about_us.html">About us</a>
                <a href="support.html">Support</a>
            </div>
        </div>
        <div class="body_input">
            <h1>Sign In</h1>
            <input type="text" placeholder="Username" class="inp" id="username">
            <input type="password" placeholder="Password" class="inp" id="password">
            <button style="width: 14%; border-radius: 10px; padding: 7px 15px; width: 330px;" onclick="login()">Submit</button>
            <a href="/create">Create</a>
        </div>
    </div>
    <div class="footer">
        <a href="/"><img src="static/images/white_little.svg" alt="logo" style="max-width: 30px;"></a>
        <div class="footer_text">
            <a href="/catalog">Catalog</a>
            <a href="/about_us">About us</a>
            <a href="/support">Support</a>
        </div>
    </div>
      <script>
    async function login() {
      const username = document.getElementById("username");
      const password = document.getElementById("password");

      const response = await fetch("/login", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({ username: username.value, password: password.value })
      });

      if (response.ok) {
        const data = await response.json();
        localStorage.setItem("token", data.access_token);
        window.location.href = "/";
      }
    }
  </script>
</body>
</html>